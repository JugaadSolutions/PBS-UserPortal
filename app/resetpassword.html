<html ng-app="myApp">
<head>
    <title>Reset Password</title>
    <script src="../assets/js/jquery.min.js"></script>
    <script src="passwordstrength.js"></script>
    <script src="hash.js"></script>
<style>
    .submit {
        width: 10%;
        background-color: #4CAF50;
        color: white;
        padding: 8px 20px;
        margin: 8px 0;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        margin-left:50px;
        font-size: larger;
    }
</style>

</head>
<body ng-controller="test">
<form name="registration">
    <ul class="header-inner clearfix ">
        <img src="../assets/images/trintrin.jpg"  style="margin-left: 560px;height:150px;width:150px"/>
    </ul>

    <div id="MainDiv">
    <!--division for forgot password-->
    <div id="divForgotPassword" style="display: block;text-align: center">
    <label style="color:maroon;font-weight: bold;font-size:x-large;">Reset Password</label><br>
    <br>
    <div style="text-align: center">

        <label for="password">Password </label>
        <input name="password" id="password" type="password" maxlength="30"/>
        <span id="result"></span>

        <br>
        <br>
        <label for="confirmPassword" style="margin-left: -53px">Confirm Password </label>
        <input name="password" style="margin-right: 124px" id="confirmPassword" type="password" maxlength="30"/>
        <span id="confirmPasswordresult" style="margin-left: -122px"></span>
        <br>
        <br>
        <b><span style="color: maroon">Note : Password must be minimum of 6 characters and <br> should contain atleast one uppercase letter,
            one number and one special character</span></b>
      <!--  <h3><span style="font-size: 20px">New Password:</span></h3>-->

      <!--  <input type="password" name="password" ng-model="password" required
               ng-init="password_error_show=0"
               ng-focus="password_error_show=1"
               ng-change="password_error_show = password_error_show + 1;changepassword()"
               style="font-size: 25px">

        <div style="color: #ff0000" ng-show="!passValidation && password_error_show>0">
            <div style="margin-left: 24px;">
                password must be alphanumeric , one lower , upper letter and one special character.
            </div>
            <div style="margin-left: 6em">
                password length minimum 6 characters
            </div>
        </div>

        <h3><span style="font-size: 20px">Confirm Password:</span></h3>
        <input type="password" name="cpassword"
               ng-model="cpassword"
               required
               ng-init="cpassword_error_show=0"
               ng-focus="cpassword_error_show=1"
               ng-change="cpassword_error_show = cpassword_error_show + 1;changepassword()"
               style="font-size: 25px">
        <p>
            <span style="color: #ff0000;margin-left: -0.5em" ng-show="cpassword_error_show>0 && password !== cpassword">Password Mismatch</span>
            <span style="color: #3c823f;margin-left: -2.5em" ng-show="cpassword_error_show>0 && password === cpassword && passValidation">Password match</span>
        </p>-->
        <br>
        <br>
        <button type="button" class="submit" id="btnSubmit">Reset
        </button>
    </div>
    </div>

    <!--Division for reset password success message-->
    <div id="DivSuccess" style="display:none;color:green;font-weight: bold;font-size:x-large;text-align: center">
        <h2>
            <label> Your Password Resetted Successfully</label>
            </h2>
    </div>

    <!--Division for reset password success message-->
    <div id="DivFailure" style="display: none;color:red;font-weight: bold;font-size:x-large;text-align: center">
        <h2>
            <label id="lblfailuremessage">Unable to reset your password.<br>Please contact support team : 0821-2333000</label>
        </h2>
    </div>

        <button type="button" class="submit" id="btnLogin" style="color:white;font-weight: bold;font-size:small;margin-left: 630px">Login
        </button>
    </div>
</form>
</body>
<script>
 /*  window.onload = function() {
   };*/

    $(document).ready(function(){

        $("#btnLogin").click(function(){
            window.location.href="http://www.mytrintrin.com/userportal";
        });

        $("#btnSubmit").click(function()
        {
            var pass1=$('#password').val();
            var pass2=$('#confirmPassword').val();
            if(pass1 == "" || pass2=="")
            {
                return
            }
            params={};
            location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(s,k,v){params[k]=v})
            var _key = params["rskey"];
            var _hash_password = md5(pass1);

            var URL = "http://www,mytrintrin.com/api/users/resetpassword/";

            var dataObject = { 'resetkey': _key, 'newPassword': _hash_password };

           /* alert(JSON.stringify(dataObject));*/

            $.ajax({
                url: URL,
                type: 'PUT',
                data: dataObject,
                dataType: 'json',
                success: function(result) {
                  /*  document.getElementById("divForgotPassword").style.display="none";
                    document.getElementById("DivSuccess").style.display="block";*/
                    window.location.href = "http://www.tutorialrepublic.com/";
                },
                error:function (error) {
                    document.getElementById("DivFailure").style.display="block";
                    document.getElementById("divForgotPassword").style.display="none";
                }

            });
        });
    });

       function testing () {

       };
</script>
<script>
    $(document).ready(function(){
        $("#btnLogin").click(function() {
        window.location.href="www.mytrintrin.com/userportal/";
        });
    });
</script>
</html>